import { Map, TileLayer, LayerGroup, Control, Marker, Icon } from 'leaflet';

window.load = () => {
    const map = new Map('map');

    const amapLayer = new TileLayer(
        'http://wprd0{s}.is.autonavi.com/appmaptile?x={x}&y={y}&z={z}&lang=zh_cn&size=1&scl=1&style=7',
        {
            subdomains: '1234'
        }
    );

    const tdtVectorLayer = new TileLayer(
        'http://t0.tianditu.gov.cn/vec_w/wmts?layer=vec&style=default&tilematrixset=w&Service=WMTS&Request=GetTile&Version=1.0.0&Format=tiles&TileMatrix={z}&TileCol={x}&TileRow={y}&tk=11b55a09c9e0df4a1e91741b455b7f28',
        {}
    );

    const tdtLabelLayer = new TileLayer(
        'http://t0.tianditu.gov.cn/cva_w/wmts?layer=cva&style=default&tilematrixset=w&Service=WMTS&Request=GetTile&Version=1.0.0&Format=tiles&TileMatrix={z}&TileCol={x}&TileRow={y}&tk=11b55a09c9e0df4a1e91741b455b7f28',
        {}
    );

    const tdtLayer = new LayerGroup([tdtVectorLayer, tdtLabelLayer]);

    amapLayer.addTo(map);

    map.setView([39.909186, 116.397411], 10);

    const layerControl = new Control.Layers(
        {
            高德: amapLayer,
            天地图: tdtLayer
        },
        {},
        { collapsed: false }
    );
    layerControl.addTo(map);

    const svg = '<svg t="1634017671803" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1207" width="200" height="200"><path d="M336.3 72h331.3v205.6H336.3z" fill="#F2B843" p-id="1208"></path><path d="M405.6 72h192.8v205.6H405.6z" fill="#EA800C" p-id="1209"></path><path d="M336.3 746.4h331.3V952H336.3z" fill="#F2B843" p-id="1210"></path><path d="M405.6 746.4h192.8V952H405.6z" fill="#EA800C" p-id="1211"></path><path d="M859.7 566h-62.1c-17.2 0-31.3-14.1-31.3-31.3v-49.1c0-17.2 14.1-31.3 31.3-31.3h62.1c17.2 0 31.3 14.1 31.3 31.3v49.1c0 17.3-14.1 31.3-31.3 31.3z" fill="#3DC38A" p-id="1212"></path><path d="M212.4 721.2l43.9-43.9c12.2-12.2 32.1-12.2 44.3 0l34.7 34.7c12.2 12.2 12.2 32.1 0 44.3l-43.9 43.9c-12.2 12.2-32.1 12.2-44.3 0l-34.7-34.7c-12.2-12.2-12.2-32.1 0-44.3zM668.5 265.1l43.9-43.9c12.2-12.2 32.1-12.2 44.3 0l34.7 34.7c12.2 12.2 12.2 32.1 0 44.3l-43.9 43.9c-12.2 12.2-32.1 12.2-44.3 0l-34.7-34.7c-12.2-12.2-12.2-32.1 0-44.3zM291.4 221.1l43.9 43.9c12.2 12.2 12.2 32.1 0 44.3L300.6 344c-12.2 12.2-32.1 12.2-44.3 0l-43.9-43.9c-12.2-12.2-12.2-32.1 0-44.3l34.7-34.7c12.2-12.1 32.1-12.1 44.3 0zM747.5 677.3l43.9 43.9c12.2 12.2 12.2 32.1 0 44.3l-34.7 34.7c-12.2 12.2-32.1 12.2-44.3 0l-43.9-43.9c-12.2-12.2-12.2-32.1 0-44.3l34.7-34.7c12.2-12.2 32.1-12.2 44.3 0z" fill="#F2B843" p-id="1213"></path><path d="M501.9 510.7m-328.9 0a328.9 328.9 0 1 0 657.8 0 328.9 328.9 0 1 0-657.8 0Z" fill="#2F9B77" p-id="1214"></path><path d="M501.9 510.7m-260.1 0a260.1 260.1 0 1 0 520.2 0 260.1 260.1 0 1 0-520.2 0Z" fill="#3DC38A" p-id="1215"></path><path d="M500.5 379.6l-24.1 131.3 48.1 1.1z" fill="#EA800C" p-id="1216"></path><path d="M698.9 632.5L513.4 492.8l-25.6 40.8z" fill="#EA800C" p-id="1217"></path><path d="M487.826787 552.901398a44.5 44.5 0 1 0 28.141399-84.433771 44.5 44.5 0 1 0-28.141399 84.433771Z" fill="#FFFFFF" p-id="1218"></path><path d="M501.9 361.7c-11.9 0-21.7-9.7-21.7-21.7v-67.7c0-11.9 9.7-21.7 21.7-21.7 11.9 0 21.7 9.7 21.7 21.7V340c-0.1 11.8-9.8 21.7-21.7 21.7zM501.9 770.8c-11.9 0-21.7-9.7-21.7-21.7v-67.7c0-11.9 9.7-21.7 21.7-21.7 11.9 0 21.7 9.7 21.7 21.7v67.7c-0.1 12-9.8 21.7-21.7 21.7zM651 510.7c0-11.9 9.7-21.7 21.7-21.7h67.7c11.9 0 21.7 9.7 21.7 21.7 0 11.9-9.7 21.7-21.7 21.7h-67.7c-12 0-21.7-9.7-21.7-21.7zM241.8 510.7c0-11.9 9.7-21.7 21.7-21.7h67.7c11.9 0 21.7 9.7 21.7 21.7 0 11.9-9.7 21.7-21.7 21.7h-67.7c-11.9 0-21.7-9.7-21.7-21.7z" fill="#F2B843" p-id="1219"></path><path d="M607.3 405.3c-8.5-8.5-8.5-22.2 0-30.6l47.9-47.9c8.5-8.5 22.2-8.5 30.6 0 8.5 8.5 8.5 22.2 0 30.6l-47.9 47.9c-8.4 8.4-22.2 8.4-30.6 0zM318 694.6c-8.5-8.5-8.5-22.2 0-30.6l47.9-47.9c8.5-8.5 22.2-8.5 30.6 0 8.5 8.5 8.5 22.2 0 30.6l-47.9 47.9c-8.5 8.4-22.2 8.4-30.6 0zM607.3 616.2c8.5-8.5 22.2-8.5 30.6 0l47.9 47.9c8.5 8.5 8.5 22.2 0 30.6-8.5 8.5-22.2 8.5-30.6 0l-47.9-47.9c-8.4-8.5-8.4-22.3 0-30.6zM318 326.8c8.5-8.5 22.2-8.5 30.6 0l47.9 47.9c8.5 8.5 8.5 22.2 0 30.6-8.5 8.5-22.2 8.5-30.6 0L318 357.4c-8.5-8.3-8.5-22.1 0-30.6z" fill="#F2B843" p-id="1220"></path></svg>';

    //const svg = '<svg t="1633736493968" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4624" width="200" height="200"><path d="M350.208 498.176h-2.56c-16.896-1.536-29.184-16.384-28.16-33.28C332.288 313.344 406.528 225.28 465.92 177.664c65.024-51.712 126.976-67.072 129.536-68.096 16.384-4.096 33.28 6.144 37.376 22.528 4.096 16.384-6.144 33.28-22.528 37.376-8.704 2.048-208.384 55.808-229.376 300.544-1.536 15.872-14.848 28.16-30.72 28.16z" fill="#FF7879" p-id="4625"></path><path d="M712.192 569.344c-3.072 0-6.144-0.512-9.216-1.536-16.384-5.12-25.088-22.528-19.968-38.4 75.264-236.032-94.72-364.544-96.256-365.568-13.824-10.24-16.384-29.184-6.656-43.008 10.24-13.824 29.184-16.384 43.008-6.656 2.048 1.536 53.248 39.936 93.696 112.64 36.864 67.072 71.168 177.152 25.088 321.536-4.608 12.288-16.384 20.992-29.696 20.992z" fill="#FF7879" p-id="4626"></path><path d="M880.128 621.056c-2.048 0-4.096 0-5.632-0.512L170.496 484.864c-8.192-1.536-14.848-6.144-19.456-12.8-4.608-6.656-6.144-14.848-4.608-23.04l7.168-36.352C173.056 310.784 231.424 222.208 317.44 163.84c86.016-58.368 189.44-79.36 291.84-59.904 210.432 40.448 349.184 245.248 308.224 455.68l-7.168 36.352c-3.072 14.848-15.872 25.088-30.208 25.088zM211.968 430.08l643.584 123.904 1.024-6.144c34.304-177.664-82.432-349.696-259.584-384-177.664-34.304-349.696 82.432-384 259.584l-1.024 6.656zM154.624 926.72c-12.288 0-24.064-7.168-28.672-19.456-6.144-15.872 1.536-33.792 17.408-39.936l131.584-51.712c25.6-10.24 53.76-11.264 80.384-3.072l145.92 45.568c11.264 3.584 23.552 3.584 34.816 0l148.992-46.08c26.112-8.192 54.784-6.656 80.384 3.584l128 51.712c15.872 6.144 23.552 24.064 16.896 39.936-6.144 15.872-24.064 23.552-39.936 16.896l-128-51.712c-12.288-5.12-26.624-5.632-39.424-1.536l-148.992 46.08c-23.552 7.168-48.128 7.168-71.168 0l-145.92-45.568c-12.8-4.096-26.624-3.584-39.424 1.536l-131.584 51.712c-3.584 1.536-7.68 2.048-11.264 2.048z" fill="#4B81EE" p-id="4627"></path><path d="M155.648 697.344c0-68.096 54.784-122.88 122.88-122.88s122.88 54.784 122.88 122.88h-245.76z" fill="#DBE6FC" p-id="4628"></path><path d="M401.408 728.064h-245.76c-16.896 0-30.72-13.824-30.72-30.72 0-84.48 69.12-153.6 153.6-153.6s153.6 69.12 153.6 153.6c0 16.896-13.824 30.72-30.72 30.72z m-209.92-61.44h173.568c-12.8-35.84-47.104-61.44-87.04-61.44-39.936 0-73.728 25.6-86.528 61.44zM469.504 870.912c-2.048 0-4.096 0-6.144-0.512-16.896-3.072-27.648-19.456-24.064-35.84l132.608-678.4c3.072-16.896 19.456-27.648 35.84-24.064 16.896 3.072 27.648 19.456 24.064 35.84L499.712 846.336c-3.072 14.336-15.872 24.576-30.208 24.576z" fill="#4B81EE" p-id="4629"></path></svg>'
    const marker = new Marker([39.909186, 116.397411], {
        icon: new Icon({
            iconUrl: 'data:image/svg+xml,' + encodeURIComponent(svg),
            iconSize: [32, 32],
            iconAnchor: [16, 32]
        })
    });

    marker.addTo(map);
}
