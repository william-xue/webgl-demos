<!--
	此示例下载自 https://echarts.apache.org/examples/zh/editor.html?c=lines-bmap-effect&code=CQOg5gpgLgFASgeQQFQPoAUCCyASACAajwHIB6AEwEMpLTKBne6C62gGwEsA7CegWgBGAV3ogAVvQD2XYgBo8AMyFcAxlA7S8MKjQCUeAN4AoPHjbQ8ACwDKUCAAc8AXjwBmAAzu8pLTsohzLjAoSzw-PABGXQBuEzMLYXoAGW5eZzwAbQBdEBVpFWoQSnt7NgBPGDjTbNkqvD8QAFtimCVVdU0YRJSeeQ5yAA99Y1NR-Kg8ewAnCAA3dAmXbNix03MJ-0luKHp05brTBUkprXW8DnT3aPO8AB48btSAiCCQ64uCFwAmYYPRs_si0yjx4GQ4WXkIIgYMIkSyWRWq1MHAUWguAD48O5fkixoC9tM5gsMu4srDASSIZMZvMoBkImSiBSGQi_qYAL5s6lEoGAxFIzbbUT2ESWGAZCmk7yRCAAFnkzLJPgicqyMT-nKRMygQimXEMXLyx3I9AAXJMtlwdrVcWZUrYyuZzSNbXguMdmmxnVyxnk2MdzRAVJZKFMdrlJP6pk1JOQUWUcNYkjBiABiACsmAAnLKACIAMTkeAAstRLCAppJlOQYDY7I4AFTnQa6XQ-vCa3Gdsbs_kdtumdWmRplADCIbDICYUAQgI0XEqYxgkjnmhcLrGAma9m9tpULzsU3N9IiADYQLLT_JXFmQFmvhCuQAvSSSRrmiLuG24yuUd94KApiECBvyRbcHSdA1XTwegoEdCAACkpC4Y921MDdoMUCBqF1CBkDKewIHNYgAHdqAgKY5DQ0YIHMRoD3wwjiMoNg2CozDRlg-CpjNKCONGP0AxIVN3FcM8vgADmIaiOWo9lQNdDDoIUbCdRmRiiJINhKC4ch2P42iIHoq0NOIyA32gKYyn0jiuPMHjd340xBKPYTPHcT8vmkpzu1deTqKU10VJw9SCM04hLA4MBLDI6yFOgwzjKgUySBYtj4tdOyKN4wLoNmDh6A4AQOE4ODiMkBQFG8_jfNtfyONy3FgrUvCwuYsMKI4FibMwxKGLakhzPowCyhABQSvSmSYLg-ycqm5zIyEtN3Pc6qONqrsMqRRqkWa3CUuIUNDy6yanL6kyBuIIbLNG2DKwAawgHroKyhy-KclziJEgRXHIdMIjWzCNqRerMJ21Y9tCpitMkApToMuj-uhq6IAskbnsymbsscj7Ftc5aVvcQHoOB1ZQeg8Gxkh1rkamSgStijHbXO5LLuukaxompncVeuanIWqMvsJomptJnsttWSnRmpg66YZyg4qmlmDvZqyp0AyRHu5pFeZx_jPrciSPFlARib8uSJbGKXDlU_bLvoIQBEZy3VmVtnUeGqztdWXX3v4zhoqgHhGHNPgAHZ3FFi2AqmmXLuEEq4yCb2xjd5HVdG8bWJTzisbe62BLxoXCbNuro4a2Pbah8K0pz0w0_C7SBFo0Q7AGKBOezl2xl9guBaW1MJPTMOFBH0uu3LsHK5Cmma67pXEYu5Gm5bkA247u7Nae7vc-4vn-YNgmVvHkHJ4p6eWoOhO2CTsA67wBuzI9m7797-a8EPkSvi-VxXCkqP1o7wLnHdOMwXj30foNZ-6Md6mDfvzD-Rc3Kni-KJLyACgZAIvnbZGAgqy6VDIrM6i9WbI1rrA6ae89YcU_pedMAhTwqBPmTM-ilsHV2Is0LgzRyDbwXkZJGc94a2TzvvXGgs3Lf1_v_HyrDbTAKrrPYiK9hG9RIQdchU14H83yoVYqpUyjlUqswnscl2xZC5BtcmnFOq8FQvI9scFl6pHoN7I0Uwk7kWsGUWCRliJbmKN7TY5ROA8HNIBYCLs_DmihPQF2hVAhQHCUBEC7ZQkQAgppKWpAfCfxUD_dMYkc45MQRI4gUwwACBgKgr8bh0zyFlOmXQOcVyUBUBwMqWIQBfB3iRfoIQPztmsQKSsYAZiMA4LMPClhxmWEjOQc06ZPAu2mJIMZvBCpTPNDUyxEtwZOMbi4txr4PHcC8T4uw_5iABPsEEyMjpUjJMie2aJDwRA9F4C7dJmTqG4j6eQAZWIhkuwgJVIMSS_Z7mkLBHSUBrCEQgAsvAqCd70DmSRJ5qSOKAXpmwJILxgiWHNO4EAERUVlEaHgtg1gOBPk0hEEA6ZgXtifOYKZXpIiWL-BYnsA48DqnZDEIAA
	⚠ 请注意，该图表不是 Apache ECharts 官方示例，而是由用户代码生成的。请注意鉴别其内容。
-->
<!DOCTYPE html>
<html lang="zh-CN" style="height: 100%">
<head>
  <meta charset="utf-8">
  <style>
    .anchorBL, .BMap_cpyCtrl{
      display: none !important;
    }
  </style>
</head>
<body style="height: 100%; margin: 0">
  <div id="container" style="height: 100%"></div>

  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/jquery"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.0/dist/echarts.min.js"></script>
  <!-- Uncomment this line if you want to dataTool extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.0/dist/extension/dataTool.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use gl extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-stat extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-stat@latest/dist/ecStat.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use map
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/china.js"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/world.js"></script>
  -->
  <!-- Uncomment these two lines if you want to use bmap extension -->
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=TdTTezWLPCZleMd8C7xPFep25b74XtIZ"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.0/dist/extension/bmap.min.js"></script>

  <script type="text/javascript">
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    var app = {};
    var ROOT_PATH = 'https://echarts.apache.org/examples';
    var option;

    $.get('./lines-bus.json', function (data) {
  let hStep = 300 / (data.length - 1);
  let busLines = [].concat.apply(
    [],
    data.map(function (busLine, idx) {
      let prevPt = [];
      let points = [];
      for (let i = 0; i < busLine.length; i += 2) {
        let pt = [busLine[i], busLine[i + 1]];
        if (i > 0) {
          pt = [prevPt[0] + pt[0], prevPt[1] + pt[1]];
        }
        prevPt = pt;
        points.push([pt[0] / 1e4, pt[1] / 1e4]);
      }
      return {
        coords: points,
        lineStyle: {
          normal: {
            color: echarts.color.modifyHSL('#5A94DF', Math.round(hStep * idx))
          }
        }
      };
    })
  );
  myChart.setOption(
    (option = {
      bmap: {
        center: [116.46, 39.92],
        zoom: 10,
        roam: true,
        mapStyle: {
          styleJson: [
            {
              featureType: 'water',
              elementType: 'all',
              stylers: {
                color: '#031628'
              }
            },
            {
              featureType: 'land',
              elementType: 'geometry',
              stylers: {
                color: '#000102'
              }
            },
            {
              featureType: 'highway',
              elementType: 'all',
              stylers: {
                visibility: 'off'
              }
            },
            {
              featureType: 'arterial',
              elementType: 'geometry.fill',
              stylers: {
                color: '#000000'
              }
            },
            {
              featureType: 'arterial',
              elementType: 'geometry.stroke',
              stylers: {
                color: '#0b3d51'
              }
            },
            {
              featureType: 'local',
              elementType: 'geometry',
              stylers: {
                color: '#000000'
              }
            },
            {
              featureType: 'railway',
              elementType: 'geometry.fill',
              stylers: {
                color: '#000000'
              }
            },
            {
              featureType: 'railway',
              elementType: 'geometry.stroke',
              stylers: {
                color: '#08304b'
              }
            },
            {
              featureType: 'subway',
              elementType: 'geometry',
              stylers: {
                lightness: -70
              }
            },
            {
              featureType: 'building',
              elementType: 'geometry.fill',
              stylers: {
                color: '#000000'
              }
            },
            {
              featureType: 'all',
              elementType: 'labels.text.fill',
              stylers: {
                color: '#857f7f'
              }
            },
            {
              featureType: 'all',
              elementType: 'labels.text.stroke',
              stylers: {
                color: '#000000'
              }
            },
            {
              featureType: 'building',
              elementType: 'geometry',
              stylers: {
                color: '#022338'
              }
            },
            {
              featureType: 'green',
              elementType: 'geometry',
              stylers: {
                color: '#062032'
              }
            },
            {
              featureType: 'boundary',
              elementType: 'all',
              stylers: {
                color: '#465b6c'
              }
            },
            {
              featureType: 'manmade',
              elementType: 'all',
              stylers: {
                color: '#022338'
              }
            },
            {
              featureType: 'label',
              elementType: 'all',
              stylers: {
                visibility: 'off'
              }
            }
          ]
        }
      },
      series: [
        {
          type: 'lines',
          coordinateSystem: 'bmap',
          polyline: true,
          data: busLines,
          silent: true,
          lineStyle: {
            // color: '#c23531',
            // color: 'rgb(200, 35, 45)',
            opacity: 0.2,
            width: 1
          },
          progressiveThreshold: 500,
          progressive: 200
        },
        {
          type: 'lines',
          coordinateSystem: 'bmap',
          polyline: true,
          data: busLines,
          lineStyle: {
            width: 0
          },
          effect: {
            constantSpeed: 20,
            show: true,
            trailLength: 0.1,
            symbolSize: 1.5
          },
          zlevel: 1
        }
      ]
    })
  );
});


    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
  </script>
</body>
</html>